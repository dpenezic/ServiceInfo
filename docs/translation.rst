Translation
===========

Backend
-------

Backend translation uses the standard Django translation mechanisms
(https://docs.djangoproject.com/en/1.7/topics/i18n/).

Then we use Transifex to make it easy for client staff to provide
translations of the text in the Django project.

Developer setup
~~~~~~~~~~~~~~~

While the Transifex command line client is in Python, unfortunately it
does not appear to work with Python 3 yet. So, if you're a developer
who need to push or pull text to Transifex, it's probably simplest
to install the client globally on your system
(http://docs.transifex.com/developer/client/setup) and set it up per the
instructions.  On Ubuntu, you might even be able to use the Ubuntu
package::

    sudo apt-get install transifex-client

Adding features and fixing bugs
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Note that we don't store the ``.po`` files in git, because they can
easily be regenerated by running ``makemessages`` again.

Updating messages on Transifex
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Instead, if there have been changes to the messages in the code or templates
that have been merged to develop, someone should update the messages on
Transifex as follows:

1. regenerate the English (only) .po file::

    fab makemessages

#. push the updated source file to Transifex (http://support.transifex.com/customer/portal/articles/996211-pushing-new-translations)::

    fab pushmessages


Updating translations from Transifex
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Anytime translations on Transifex have been updated, someone should update
our translation files on the develop branch as follows:

1. pull the updated files (http://support.transifex.com/customer/portal/articles/996157-getting-translations)::

    fab pullmessages

2. Compile the messages::

    fab compilemessages

3. Use ``git diff`` to see if any translations have actually changed. If not, you
   can just revert the Arabic or French .po file changes and stop here.

4. Run your test suite one more time::

    python manage.py test

5. Commit and push the changes to github::

    git commit -m "Updated translations" locale/ar/LC_MESSAGES/* locale/fr/LC_MESSAGES/*
    git push


Frontend
--------

To be written...
