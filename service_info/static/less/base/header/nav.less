@import "../../includes/mixins.less";
@import "../../includes/variables.less";

@side-nav-height: 48px;
@search-item-height: 56px;
@active-item-color: #ee6e73;
@active-item-hover: #e57373;

.side-nav, .side-nav.fixed {
  > li > .collapsible > .page-active,
  > li.page-active {
    // background-color: #ee6e73;
  }

  /*
    Enumeration of possible text areas needing colors.
  */
  li {
    &.page-active {
      > a,
      > .overlay > a,
      > .collapsible-header,
      &.page-active > a {
        color: white;
      }
    }
  }

  .collapsible-body {
    li.active {
      a {
        color: black;
      }
    }
    li.page-active {
      > a {
        color: white;
      }
    }
  }

  .collapsible {
    .overlay {
      &:hover {
        & + .underlay {
          color: white;
        }
      }
    }
    .collapsible-header {
      &:hover + .underlay {
        color: white;
      }
    }
  }

  /*
    Enumeration of possible highlighted regions (either hover or active).
  */

  li {
    &.page-active {
      background-color: @active-item-color;
      transition: none;
    }

    a {
      &:hover {
        background-color: @active-item-color;
        transition: none;
      }
      transition: none;
    }
  }

  .collapsible {
    .overlay {
      &:hover {
        & + .underlay {
          background-color: @active-item-color;
          transition: none;
        }
      }
    }
    .collapsible-header {
      &:hover + .underlay {
        background-color: @active-item-color;
        transition: none;
      }
    }
  }


  li {
    position: relative;

    &.active {
      background-color: transparent;
      a {
        // color: black;
      }
    }

    a {
      -webkit-transition: all .3s ease-out;
      transition: all .3s ease-out;
    }

    &:hover {
      background-color: transparent;
      // color: white;
      // > a, > .overlay > a {
      //   color: white;
      // }
    }

    &:not(.logo) {
      .flex-layout();
      .flex-direction(column);
    }
    form {
      /*
        Correcting for weird form behavior in the nav.
      */
      padding: 0 1rem;

      i {
        line-height: @search-item-height;
      }
      input {
        margin: 0;
        height: @search-item-height;
      }
      .input-field {
        margin: 0;

        input[type=search] ~ .material-icons {
          right: 0.75rem;
        }
      }
      label {
        height: 100%;
        top: 0;
        &.active {
          -webkit-transform: none!important;
          -moz-transform: none!important;
          -ms-transform: none!important;
          transform: none!important;
        }
      }
    }

    .overlay {
      height: 48px;
      position: absolute;
      left: 0;
      top: 0;
      z-index: 2;

      width: 192px;

      .flex-layout();
      .align-items(center);
      a {
        .flex-layout();
        .align-items(center);
        padding-left: 30px;
        width: 100%;
        height: 100%;
        display: inline-flex;
      }
    }

    .underlay {
      height: 48px;
      position: absolute;
      z-index: 0;
      width: 100%;
      left: 0;
      top: 0;
    }

    a {
      min-height: @side-nav-height;
      height: auto;
      line-height: 1;
      .flex-layout();
      .flex-direction(row);
      .align-items(center);

      &.collapsible-header {
        &:not(.active) + .collapsible-body .overlay {
          display: none;
        }

        .collapsible-header-wrap {
          .flex-layout();
          .flex-direction(row);
          .align-items(center);
          .justify-content(space-between);
          .flex(0, 1, 100%);
          flex-basis: 100% !important;

          i {
            .flex-layout();
            .align-items(center);
            .justify-content(center);
            height: 48px;
            width: 48px;
            // background-color: rgba(255,255,255,0.75);
          }
        }
        padding: 0 0 0 30px;
        width: 100%;
        box-sizing: border-box;
        margin: 0;
        i {
          margin-right: 0;
        }
      }
    }

    &.logo:hover {
      // background-color: transparent;
    }
  }

  .collapsible {
    .overlay {
      width: 192px;
      &:hover {
        & + .collapsible-header {
          // background-color: @active-item-color;
          color: white;
        }
        > a {
          color: white;
        }
      }
    }
    .collapsible {
      .overlay {
        width: 184px;
      }
      .collapsible {
        .overlay {
          width: 176px;
        }
        .collapsible {
          .overlay {
            width: 168px;
          }
        }
      }
    }
  }

  .collapsible-body {
    li:not(.page-active) {
      &.active {
        > .overlay > a {
          // color: white;
        }
        > a {
          color: black;
        }
      }
    }
    border-left: 3px solid rgba(0,0,0,0.15)!important;
    margin-left: 5px;
    // background-color: @amber-lighten-3;
    .collapsible-body {
      // background-color: @amber-lighten-4;
      .collapsible-body {
        // background-color: @amber-lighten-5;
      }
    }

    .overlay {
      a {
        padding: 0 0 0 15px;
      }
    }

    li {
      &.active {
        background-color: transparent;
      }
      a, a.collapsible-header {
        margin: 0;
      }
      .overlay {
        a {
          margin: 0;
        }
      }
    }
  }
}
