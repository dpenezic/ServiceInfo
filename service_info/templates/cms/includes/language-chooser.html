{% load cms_tags menu_tags i18n %}

<div id="language-picker" class="modal">
  <div class="modal-content">
    <h4>{% trans "Choose language" %}</h4>
  </div>
  <div class="modal-footer">
    {% for language in languages %}
      <a class="modal-action modal-close waves-effect waves-green btn" href="{% page_language_url language.0 %}" data-lang="{{ language.0 }}">
        {% if language.0 == "ar" %}
          &#x627;&#x644;&#x639;&#x631;&#x628;&#x64A;&#x629;
        {% elif language.0 == "fr" %}
          Fran√ßais
        {% elif language.0 == "en" %}
          English
        {% else %}
          {{ language.0 }}
        {% endif %}
      </a>
    {% endfor %}
  </div>
</div>

<script>
  $(function ($) {
    window.language_picker(
      '#language-picker'
      , '{{ request.LANGUAGE_CODE }}'
      , {
        {% for language in languages %}
          '{{ language.0 }}': '{% page_language_url language.0 %}'{% if not forloop.last %},{% endif %}
        {% endfor %}
      }
    );
  });
</script>
